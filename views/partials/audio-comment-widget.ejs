<link rel="stylesheet" href="/css/audio-comment-widget.css">

<div class="player-sticky-wrapper">
    <div class="controls">
        <button class="play-btn" id="playBtn" disabled>▶</button>
        <div class="time-display" id="timeDisplay">00:00 / 00:00</div>
    </div>

    <div class="waveform-container" id="waveformContainer">
        <div id="waveform"></div>
    </div>

    <div class="control-panel">
        <button class="control-btn" id="downloadBtn">⬇ Download</button>
        <button class="control-btn" id="commentsToggle">Show Closed Comments</button>
    </div>
</div>

<!-- Inline comment form (hidden by default) -->
<div class="inline-comment-form hidden" id="inlineCommentForm">
    <div class="form-header">
        <h3>Add Comment at <span id="commentTimestamp">0:00</span></h3>
        <button class="close-btn" id="cancelCommentBtn">×</button>
    </div>
    <form id="commentForm">
        <div class="form-group">
            <label for="commentUsername">Username:</label>
            <input type="text" id="commentUsername" name="username" value="anonymous" required>
        </div>
        <div class="form-group">
            <label for="commentContent">Comment:</label>
            <textarea id="commentContent" name="content" placeholder="Enter your comment..." required rows="4"></textarea>
        </div>
        <div class="form-actions">
            <button type="button" class="btn-secondary" id="cancelCommentBtn2">Cancel</button>
            <button type="submit">Post Comment</button>
        </div>
    </form>
</div>

<div class="comments-section">
    <h3 class="mb-15">Comments</h3>
    <div id="commentsContainer">
        <div class="comments-placeholder">No comments yet. Click on the waveform to add a comment!</div>
    </div>
</div>

<template id="reply-modal-template">
    <div class="modal-overlay" id="replyModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Reply to Comment</h3>
                <button class="modal-close">×</button>
            </div>
            <form id="replyForm">
                <div class="form-group">
                    <label for="replyUsername">Username:</label>
                    <input type="text" id="replyUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="replyContent">Reply:</label>
                    <textarea id="replyContent" name="content" placeholder="Enter your reply..." required></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary cancel-reply-btn">Cancel</button>
                    <button type="submit">Post Reply</button>
                </div>
            </form>
        </div>
    </div>
</template>

<template id="comment-item-template">
    <div class="comment-thread">
        <div class="comment-item root-comment">
            <div class="comment-meta">
                <div class="comment-meta-left">
                    <span class="comment-timestamp"></span>
                    <span class="comment-separator">·</span>
                    <span class="comment-author"></span>
                </div>
                <div class="comment-meta-right">
                    <button class="btn-inline reply-btn">↩ Reply</button>
                    <button class="btn-inline close-thread-btn hidden">✕ Close</button>
                </div>
            </div>
            <div class="comment-content"></div>
            <div class="toggle-replies-line hidden"></div>
        </div>
        <div class="replies-container hidden"></div>
    </div>
</template>

<template id="comment-reply-template">
    <div class="comment-item comment-reply">
        <div class="comment-meta">
            <span class="comment-author"></span>
        </div>
        <div class="comment-content"></div>
    </div>
</template>
